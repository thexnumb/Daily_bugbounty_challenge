Template of the Daily Notes:
1. **Review + Learning**
	1. Review the yesterday
	2. Learning (Learning Vulnerabilities, Reading Writeups, solve Labs (HTB, PortSwigger))
2. **Hunting**
---
-  Review + Learning
	- Review
		- Youtube + Twitch (discord weekly live on Sundays) (Works on VDP program)
		-  [x] Change the Description of the Youtube channel (Weekly Live hunting on Sundays!)
	- Learning
		- **Cache Vulnerabilities**
			- **What is Cache?** Cache means a copy of data is stored somewhere
			- This can be on the ==browser-side, CDN, DNS==, or anywhere else. The stored copy is used for future requests, making them faster
			- CDN Cache: The discussion focuses on CDN (Content Delivery Network) cache
			- A CDN is a network of distributed servers used for faster delivery of web content. A key feature of CDNs is caching, storing copies of files in multiple locations to improve page load time and reduce bandwidth consumption
			- What gets cached? CDNs often cache static resources, detected by file extensions (like `.css`, `.js,` `.jpg`) or specific configurations
			- How the Cache Works: A cache server acts as a reverse proxy
			- It decides whether to serve a stored copy or go to the original server (upstream) based on the Cache Key
			- The Cache Key: Every HTTP request generates a Cache Key
			- This key is derived from parts of the request like the protocol, method, hostname, and the path and query parameters (e.g., `https|GET|example.com|/news/show.php?id=1`)
			- Cache Hits and Misses: If the cache server has a stored response for a Cache Key, it serves the cached copy, indicated by a hit header
			- If not, it requests from the upstream server, indicated by a miss header. Responses from upstream on a miss can potentially be cached for future requests
			- `UnKeyed` Input: Some parameters and headers in a request do not affect the Cache Key
			- These are called `unKeyed` input. Examples include headers like `Accept-Language`, `Accept-Encoding`, `Referer`, and `Cookie`. If a response is cached based on a request with a specific `unKeyed` input (like a Cookie setting the language to German), another user making the same request (same Cache Key) might get the cached response with the content in German, even if their browser expects English
			- Preventing Cache: Upstream servers can set headers like no-cache, max-age=0, private, and no-store to prevent the cache server from storing responses for a specific request
			- Checking for CDN: You can check if a website is behind a CDN using tools like `wappalyzer` (note: can have false positives/negatives) or by pinging the domain to get its IP and then using `whois` to check the IP range
			- Web Cache Deception: The goal is for an attacker to cause the cache server to store sensitive content of another user and then retrieve it
			- An alternative is to force the client's browser to cache sensitive information. This attack was first introduced in 2017
			- How Web Cache Deception Works: A victim is tricked into clicking a malicious link
			- The link looks like a normal sensitive page URL but has an extra part that makes it look like a request for a static file (e.g., https://www.example.com/account.php/mamad.css). The web server might process the `/account.php part, generating sensitive information, while ignoring the static extension /mamad.css`. Because the URL ends with a static extension, the CDN is tricked into caching the response containing the sensitive data (usually a miss). The attacker then requests the same link, and since it's now cached, the CDN serves the victim's sensitive information (a hit)
			- Detecting Web Cache Deception: Check if the target uses a CDN
			- Look for APIs that return sensitive information. Try manipulating requests by appending static file extensions (`.css`, `.jpg`, etc.) to URLs that normally return dynamic or sensitive content to see if the CDN will cache the response. Different CDNs have default caching behaviors based on file extensions. Bypasses for blocked extensions might involve variations like `%2ecss` or adding characters before the extension
			- Web Cache Poisoning: The goal is for an attacker to cause the application to store malicious content in the cache server, which is then served from the cache to other users
			- This means compromising the cache to execute a payload on the user-side (like an XSS)
			- How Web Cache Poisoning Works: The key is to identify `unKeyed` input which affects the application
			- This is finding a part of the request that doesn't change the Cache Key but does change the response generated by the upstream server. If this unkeyed input can be used to inject malicious content (e.g., an XSS payload) and the response is cacheable, the malicious content gets stored in the cache
			- Example using an `UnKeyed` Header: An attacker sends a request with an `unKeyed` header like` X-Forwarded-Host` set to a malicious value (e.g., attacker.com)
			- The upstream application uses this malicious value in its response, creating a response containing malicious content (like a link or script pointing to attacker.com). Because `X-Forwarded-Host` is unkeyed, the Cache Key for this request is the same as a normal request for that page. The CDN caches the malicious response using this Cache Key. When a victim requests the same page normally, the CDN serves the poisoned, cached response (`X-Cache: hit`)
			- Methodology for Web Cache Poisoning: Identify if the application uses a cache server
			- Scan requests (manually or using tools like Param Miner) to find `unKeyed` inputs (headers, cookies, etc.). Specifically look for unkeyed inputs that reflect back in the server's response and ensure the response is cacheable
		- **Quiz**
			1. What is the primary purpose of caching in the context of web content delivery?
			2. Where can web caching occur besides a Content Delivery Network (CDN)?
			3. How does a CDN typically identify static resources for caching?
			4. What is a Cache Key and what information does it commonly include?
			5. Explain the concept of an "unKeyed input" in relation to web caching.
			6. What do the miss and hit headers indicate in a CDN response?
			7. What is the purpose of the vary header?
			8. List at least two HTTP headers that can prevent a cache server from storing a response.
			9. Briefly describe the objective of a Web Cache Deception attack.
			10. In the context of Web Cache Poisoning, what is the attacker trying to compromise and how?